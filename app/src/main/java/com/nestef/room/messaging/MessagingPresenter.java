package com.nestef.room.messaging;

import android.util.Log;

import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.nestef.room.base.BasePresenter;
import com.nestef.room.model.Message;

import java.io.IOException;
import java.util.List;

/**
 * Created by Noah Steffes on 3/23/18.
 */

public class MessagingPresenter extends BasePresenter<MessagingContract.MessagingView> implements MessagingContract.ViewActions {
    @Override
    public void fetchMessages() {
        String messages = "[{\"id\":\"5aec7aa31eddba3d04d1945b\",\"text\":\"What is the proper way to end immediately end a dart function?\",\"html\":\"What is the proper way to end immediately end a dart function?\",\"sent\":\"2018-05-04T15:22:11.658Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":17,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7aa4b982f08504f3688d\",\"text\":\"Just try call that function from the build method.\",\"html\":\"Just try call that function from the build method.\",\"sent\":\"2018-05-04T15:22:12.371Z\",\"fromUser\":{\"id\":\"564b042a16b6c7089cbb031d\",\"username\":\"renatoathaydes\",\"displayName\":\"Renato Athaydes\",\"url\":\"/renatoathaydes\",\"avatarUrl\":\"https://avatars-05.gitter.im/gh/uv/4/renatoathaydes\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=128\",\"v\":10,\"gv\":\"4\"},\"unread\":true,\"readBy\":17,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7acbb37eab7d04698642\",\"text\":\"Here is my working show snackbar:\",\"html\":\"Here is my working show snackbar:\",\"sent\":\"2018-05-04T15:22:51.529Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":17,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7b146f9af87e04421e87\",\"text\":\"I have a new widget with a bunch of functions blah blah, then my function that has the scaffold.of(context):\\n```\",\"html\":\"I have a new widget with a bunch of functions blah blah, then my function that has the scaffold.of(context):<br>```\",\"sent\":\"2018-05-04T15:24:04.364Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":16,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7b1d5cf0b8300457d5b8\",\"text\":\"```\\nFuture<Null> verifyDevice(String text) async {\\n    final DocumentReference document = deviceReference.document(text);\\n    await document.get().then((datasnapshot) {\\n      if (datasnapshot.exists) {\\n        print(\\\"Works!\\\");\\n        if (datasnapshot.data['owned'] == \\\"FALSE\\\") {\\n          Firestore.instance.document(text).setData({'owned': \\\"TRUE\\\"});\\n        } else {}\\n        textController.clear();\\n        insertRegisteredDevice(text);\\n        new Timer(Duration(milliseconds: 200), () {\\n          Navigator.of(context).pushNamed(\\\"/\\\");\\n        });\\n      } else {\\n        print(\\\"Broken\\\");\\n        final snackBar = new SnackBar(content: deviceRejected);\\n        new Timer(Duration(milliseconds: 200), () {\\n          Scaffold.of(context).showSnackBar(snackBar);\\n        }\\n        );\\n      }\\n    });\\n  }\\n\\n  @override\\n  Widget build(BuildContext context) {\\n    return new TextField(\\n      controller: textController,\\n      onSubmitted: (String text) {\\n        verifyDevice(text);\\n        },\\n      decoration:\\n          new InputDecoration.collapsed(hintText: \\\"Register New Device\\\"),\\n      keyboardType: TextInputType.text,\\n    );\\n  }\\n```\",\"html\":\"<pre><code>Future&lt;<span class=\\\"built_in\\\">Null</span>&gt; verifyDevice(<span class=\\\"built_in\\\">String</span> text) async {\\n    <span class=\\\"keyword\\\">final</span> DocumentReference <span class=\\\"built_in\\\">document</span> = deviceReference.<span class=\\\"built_in\\\">document</span>(text);\\n    await <span class=\\\"built_in\\\">document</span>.<span class=\\\"literal\\\">get</span>().then((datasnapshot) {\\n      <span class=\\\"keyword\\\">if</span> (datasnapshot.exists) {\\n        <span class=\\\"built_in\\\">print</span>(<span class=\\\"string\\\">\\\"Works!\\\"</span>);\\n        <span class=\\\"keyword\\\">if</span> (datasnapshot.data[<span class=\\\"string\\\">'owned'</span>] == <span class=\\\"string\\\">\\\"FALSE\\\"</span>) {\\n          Firestore.instance.<span class=\\\"built_in\\\">document</span>(text).setData({<span class=\\\"string\\\">'owned'</span>: <span class=\\\"string\\\">\\\"TRUE\\\"</span>});\\n        } <span class=\\\"keyword\\\">else</span> {}\\n        textController.clear();\\n        insertRegisteredDevice(text);\\n        <span class=\\\"keyword\\\">new</span> Timer(<span class=\\\"built_in\\\">Duration</span>(milliseconds: <span class=\\\"number\\\">200</span>), () {\\n          Navigator.of(context).pushNamed(<span class=\\\"string\\\">\\\"/\\\"</span>);\\n        });\\n      } <span class=\\\"keyword\\\">else</span> {\\n        <span class=\\\"built_in\\\">print</span>(<span class=\\\"string\\\">\\\"Broken\\\"</span>);\\n        <span class=\\\"keyword\\\">final</span> snackBar = <span class=\\\"keyword\\\">new</span> SnackBar(content: deviceRejected);\\n        <span class=\\\"keyword\\\">new</span> Timer(<span class=\\\"built_in\\\">Duration</span>(milliseconds: <span class=\\\"number\\\">200</span>), () {\\n          Scaffold.of(context).showSnackBar(snackBar);\\n        }\\n        );\\n      }\\n    });\\n  }\\n\\n  <span class=\\\"annotation\\\">@override</span>\\n  Widget build(BuildContext context) {\\n    <span class=\\\"keyword\\\">return</span> <span class=\\\"keyword\\\">new</span> TextField(\\n      controller: textController,\\n      onSubmitted: (<span class=\\\"built_in\\\">String</span> text) {\\n        verifyDevice(text);\\n        },\\n      decoration:\\n          <span class=\\\"keyword\\\">new</span> InputDecoration.collapsed(hintText: <span class=\\\"string\\\">\\\"Register New Device\\\"</span>),\\n      keyboardType: TextInputType.text,\\n    );\\n  }</code></pre>\",\"sent\":\"2018-05-04T15:24:13.831Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":15,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7b311eddba3d04d19620\",\"text\":\"This is part of my SnackBarPage class\",\"html\":\"This is part of my SnackBarPage class\",\"sent\":\"2018-05-04T15:24:33.557Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":17,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7b4c53ceca3604b0a112\",\"text\":\"Then in my main scaffold I have this:\\n```\\nchild: new Row(\\n          children: <Widget>[\\n            new Flexible(\\n              child: new SnackBarPage(),\\n            ),\\n```\",\"html\":\"Then in my main scaffold I have this:<pre><code><span class=\\\"rule\\\"><span class=\\\"attribute\\\">child</span>:<span class=\\\"value\\\"> new <span class=\\\"function\\\">Row</span>(\\n          children: &lt;Widget&gt;[\\n            new <span class=\\\"function\\\">Flexible</span>(\\n              child: new <span class=\\\"function\\\">SnackBarPage</span>(),\\n            ),</span></span></code></pre>\",\"sent\":\"2018-05-04T15:25:00.910Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":18,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7b666f9af87e04421f68\",\"text\":\"So it is able to pass context down to the lower widget because it is placed in the main scaffold widget\",\"html\":\"So it is able to pass context down to the lower widget because it is placed in the main scaffold widget\",\"sent\":\"2018-05-04T15:25:26.530Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":17,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7b731eddba3d04d19774\",\"text\":\"I tried messing around with Global Keys and couldn't figure that part out\",\"html\":\"I tried messing around with Global Keys and couldn&#39;t figure that part out\",\"sent\":\"2018-05-04T15:25:39.826Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":17,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7c1c53ceca3604b0a4aa\",\"text\":\"the `build` function is in your Widget?\",\"html\":\"the <code>build</code> function is in your Widget?\",\"sent\":\"2018-05-04T15:28:28.214Z\",\"fromUser\":{\"id\":\"564b042a16b6c7089cbb031d\",\"username\":\"renatoathaydes\",\"displayName\":\"Renato Athaydes\",\"url\":\"/renatoathaydes\",\"avatarUrl\":\"https://avatars-05.gitter.im/gh/uv/4/renatoathaydes\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=128\",\"v\":10,\"gv\":\"4\"},\"unread\":true,\"readBy\":19,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7c955cf0b8300457d9db\",\"text\":\"Ah, so when I sub-type an existing Widget, I am supposed to override its `build` method?! Will try that.\",\"html\":\"Ah, so when I sub-type an existing Widget, I am supposed to override its <code>build</code> method?! Will try that.\",\"sent\":\"2018-05-04T15:30:29.991Z\",\"fromUser\":{\"id\":\"564b042a16b6c7089cbb031d\",\"username\":\"renatoathaydes\",\"displayName\":\"Renato Athaydes\",\"url\":\"/renatoathaydes\",\"avatarUrl\":\"https://avatars-05.gitter.im/gh/uv/4/renatoathaydes\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=128\",\"v\":10,\"gv\":\"4\"},\"unread\":true,\"readBy\":19,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7cd797e5506e04996c59\",\"text\":\"Not sure exactly what you just said, but I think it is correct\",\"html\":\"Not sure exactly what you just said, but I think it is correct\",\"sent\":\"2018-05-04T15:31:35.230Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":19,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7cf953ceca3604b0a9be\",\"text\":\"If your new widget updates the ui at all, then it needs to have @override and a build method\",\"html\":\"If your new widget updates the ui at all, then it needs to have <span data-link-type=\\\"mention\\\" data-screen-name=\\\"override\\\" class=\\\"mention\\\">@override</span> and a build method\",\"sent\":\"2018-05-04T15:32:09.533Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":19,\"urls\":[],\"mentions\":[{\"screenName\":\"override\",\"userIds\":[]}],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7d2bdb299d4004d00caf\",\"text\":\"I am sub-typing a Widget. so I didn't implement `build`\",\"html\":\"I am sub-typing a Widget. so I didn&#39;t implement <code>build</code>\",\"sent\":\"2018-05-04T15:32:59.079Z\",\"fromUser\":{\"id\":\"564b042a16b6c7089cbb031d\",\"username\":\"renatoathaydes\",\"displayName\":\"Renato Athaydes\",\"url\":\"/renatoathaydes\",\"avatarUrl\":\"https://avatars-05.gitter.im/gh/uv/4/renatoathaydes\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=128\",\"v\":10,\"gv\":\"4\"},\"unread\":true,\"readBy\":19,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7d4600dc48880495af08\",\"text\":\"The super-type is `ListTile`.\",\"html\":\"The super-type is <code>ListTile</code>.\",\"sent\":\"2018-05-04T15:33:26.501Z\",\"fromUser\":{\"id\":\"564b042a16b6c7089cbb031d\",\"username\":\"renatoathaydes\",\"displayName\":\"Renato Athaydes\",\"url\":\"/renatoathaydes\",\"avatarUrl\":\"https://avatars-05.gitter.im/gh/uv/4/renatoathaydes\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=128\",\"v\":10,\"gv\":\"4\"},\"unread\":true,\"readBy\":20,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7d7497e5506e04996e68\",\"text\":\"The problem is that I have to give the constructor a `title` Widget, and that's where I need to have a snackBar.\",\"html\":\"The problem is that I have to give the constructor a <code>title</code> Widget, and that&#39;s where I need to have a snackBar.\",\"sent\":\"2018-05-04T15:34:12.891Z\",\"fromUser\":{\"id\":\"564b042a16b6c7089cbb031d\",\"username\":\"renatoathaydes\",\"displayName\":\"Renato Athaydes\",\"url\":\"/renatoathaydes\",\"avatarUrl\":\"https://avatars-05.gitter.im/gh/uv/4/renatoathaydes\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=128\",\"v\":10,\"gv\":\"4\"},\"unread\":true,\"readBy\":20,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7d801eddba3d04d19ee9\",\"text\":\"@renatoathaydes I haven't worked much with polymorphism, sorry\",\"html\":\"<span data-link-type=\\\"mention\\\" data-screen-name=\\\"renatoathaydes\\\" class=\\\"mention\\\">@renatoathaydes</span> I haven&#39;t worked much with polymorphism, sorry\",\"sent\":\"2018-05-04T15:34:24.994Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":20,\"urls\":[],\"mentions\":[{\"screenName\":\"renatoathaydes\",\"userId\":\"564b042a16b6c7089cbb031d\",\"userIds\":[]}],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7d9440f24c430451f62c\",\"text\":\"fairly new to programming in general and to flutter, but I did just figure out my own snackbar problem\",\"html\":\"fairly new to programming in general and to flutter, but I did just figure out my own snackbar problem\",\"sent\":\"2018-05-04T15:34:44.416Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":20,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7dc16d98e53e045138cc\",\"text\":\"I think I get it... I just need to implement my own `Widget` inside the `ListTile` sub-type so I can implement `build` to create the `Widget`.\",\"html\":\"I think I get it... I just need to implement my own <code>Widget</code> inside the <code>ListTile</code> sub-type so I can implement <code>build</code> to create the <code>Widget</code>.\",\"sent\":\"2018-05-04T15:35:29.764Z\",\"fromUser\":{\"id\":\"564b042a16b6c7089cbb031d\",\"username\":\"renatoathaydes\",\"displayName\":\"Renato Athaydes\",\"url\":\"/renatoathaydes\",\"avatarUrl\":\"https://avatars-05.gitter.im/gh/uv/4/renatoathaydes\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/1901277?v=4&s=128\",\"v\":10,\"gv\":\"4\"},\"unread\":true,\"readBy\":20,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7def40f24c430451f6bd\",\"text\":\"Yeah that sounds right. One thing I've learned so far is that almost everything can be a new widget\",\"html\":\"Yeah that sounds right. One thing I&#39;ve learned so far is that almost everything can be a new widget\",\"sent\":\"2018-05-04T15:36:15.057Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":20,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec7dff6d98e53e045139d1\",\"text\":\"And that flutter favors rebuilding because the operation is usually cheap\",\"html\":\"And that flutter favors rebuilding because the operation is usually cheap\",\"sent\":\"2018-05-04T15:36:31.535Z\",\"fromUser\":{\"id\":\"5ad0a6d0d73408ce4f9587b4\",\"username\":\"WaygoneWilco\",\"displayName\":\"Aaron Martz\",\"url\":\"/WaygoneWilco\",\"avatarUrl\":\"https://avatars-04.gitter.im/gh/uv/4/WaygoneWilco\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/5299212?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":20,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec89cf1eddba3d04d1c76a\",\"text\":\"Hi everyone! I need some help: A big safety related project is coming up where we really can't afford our app not working when it's most needed. Flutter looks amazing and we were thinking of using it for said project, but we're afraid of it still being in BETA, given the requirement I just mentioned. Should I go ahead and use it or stick to native development?\",\"html\":\"Hi everyone! I need some help: A big safety related project is coming up where we really can&#39;t afford our app not working when it&#39;s most needed. Flutter looks amazing and we were thinking of using it for said project, but we&#39;re afraid of it still being in BETA, given the requirement I just mentioned. Should I go ahead and use it or stick to native development?\",\"sent\":\"2018-05-04T16:26:55.180Z\",\"fromUser\":{\"id\":\"5730b196c43b8c601971e927\",\"username\":\"Eddydpyl\",\"displayName\":\"Eduardo del Palacio Lirola\",\"url\":\"/Eddydpyl\",\"avatarUrl\":\"https://avatars-05.gitter.im/gh/uv/4/Eddydpyl\",\"avatarUrlSmall\":\"https://avatars1.githubusercontent.com/u/10849050?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars1.githubusercontent.com/u/10849050?v=4&s=128\",\"v\":1,\"gv\":\"4\"},\"unread\":true,\"readBy\":6,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec8a4359a0578004a56749\",\"text\":\"Hi Guys\",\"html\":\"Hi Guys\",\"sent\":\"2018-05-04T16:28:51.306Z\",\"fromUser\":{\"id\":\"5aec8a17d73408ce4f982417\",\"username\":\"nassimbjf\",\"displayName\":\"nassimbjf\",\"url\":\"/nassimbjf\",\"avatarUrl\":\"https://avatars-01.gitter.im/gh/uv/4/nassimbjf\",\"avatarUrlSmall\":\"https://avatars1.githubusercontent.com/u/27831198?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars1.githubusercontent.com/u/27831198?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":5,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec8a6f5cf0b83004580c0b\",\"text\":\"I am making a flutter app and I want to make a button that allows to user to dial call a phone number How can I do that with Flutter?\",\"html\":\"I am making a flutter app and I want to make a button that allows to user to dial call a phone number How can I do that with Flutter?\",\"sent\":\"2018-05-04T16:29:35.483Z\",\"fromUser\":{\"id\":\"5aec8a17d73408ce4f982417\",\"username\":\"nassimbjf\",\"displayName\":\"nassimbjf\",\"url\":\"/nassimbjf\",\"avatarUrl\":\"https://avatars-01.gitter.im/gh/uv/4/nassimbjf\",\"avatarUrlSmall\":\"https://avatars1.githubusercontent.com/u/27831198?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars1.githubusercontent.com/u/27831198?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":4,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1},{\"id\":\"5aec8aa2b982f08504f3a174\",\"text\":\"Hello Everyone! i need some info regarding payments using flutter,is there any  payment gateway for flutter or any resources where can i get this info.\",\"html\":\"Hello Everyone! i need some info regarding payments using flutter,is there any  payment gateway for flutter or any resources where can i get this info.\",\"sent\":\"2018-05-04T16:30:26.046Z\",\"fromUser\":{\"id\":\"5aec89ffd73408ce4f982411\",\"username\":\"AndiDeveloper\",\"displayName\":\"AndiDeveloper\",\"url\":\"/AndiDeveloper\",\"avatarUrl\":\"https://avatars-03.gitter.im/gh/uv/4/AndiDeveloper\",\"avatarUrlSmall\":\"https://avatars0.githubusercontent.com/u/37439411?v=4&s=60\",\"avatarUrlMedium\":\"https://avatars0.githubusercontent.com/u/37439411?v=4&s=128\",\"gv\":\"4\"},\"unread\":true,\"readBy\":4,\"urls\":[],\"mentions\":[],\"issues\":[],\"meta\":[],\"v\":1}]";

        try {
            ObjectMapper mapper = new ObjectMapper();
            Log.d("mp", "fetchMessages: ");
            List<Message> messages1 = mapper.readValue(messages, new TypeReference<List<Message>>() {
            });


            mView.showMessages(messages1);
        } catch (IOException i) {
            i.printStackTrace();
        }
    }
}
